<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>IGRAA</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js"></script> 
    <style>
        #vnesuvanja > div input {
            width: 100px;
            height: 100px;
            font-size: 60px;
            text-align: center;
        }
        p{
            font-size: 20px;
            font-family: Arial,sans-serif;
            font-weight: bold;
        }
    </style>
</head>
<body>
<button id="check">Check</button>
<div id="vnesuvanja">

</div>

<script>
    let cifri = [1,2,3,4,5,6,7,8,9];
    let nth = 1;
    let broj = [];
    startGame();
    document.getElementById('check').addEventListener('click', () => {
        check();
    })
    function getRandomInt(min, max) {
        const minCeiled = Math.ceil(min);
        const maxFloored = Math.floor(max);
        return Math.floor(Math.random() * (maxFloored - minCeiled) + minCeiled); // The maximum is exclusive and the minimum is inclusive
    }
    function startGame() {
        let div = document.createElement('div');
        for (let i = 8; i >= 0; i--) {
            let ranIdx = getRandomInt(0,i);
            let tmp = cifri[i];
            cifri[i] = cifri[ranIdx];
            cifri[ranIdx] = tmp;
        }
        broj = cifri.slice(0,4);
        console.log(broj);
        document.querySelector(`#vnesuvanja`).appendChild(div);
        for (let i = 0; i < 4; i++) {
            document.querySelector(`#vnesuvanja > div:nth-of-type(1)`).innerHTML+="<input>";
        }
    }
    function check(){
        let trybroj = [];
        let tocni = 0;
        let naTocnoMesto = 0;
        document.querySelectorAll(`#vnesuvanja > div:nth-of-type(${nth}) input`).forEach((input)=>{
            trybroj.push(input.value);
        })
        let isti = true;
        broj.forEach((broj,index)=>{
            if(broj!=trybroj[index]){
                isti=false;
            }
        })
        if(isti){
            document.querySelector('body').style.background = 'url("bea.jpg")';
            document.querySelectorAll(`#vnesuvanja > div:nth-of-type(${nth}) input`).forEach((input)=>{
                anime({
                    targets: input,
                    duration: 2000,
                    backgroundColor: 'rgb(0, 128, 0)',
                    easing: 'linear'
                })
            })
            return;
        }
        document.querySelectorAll(`#vnesuvanja > div:nth-of-type(${nth}) input`).forEach((input,index)=>{
            if(input.value==broj[index]){
                naTocnoMesto++;
                tocni++;
            }
            else{
                if(broj.includes(parseInt(input.value))){
                    tocni++;
                }
            }
        })
        nth++
        const newDiv = document.createElement('div');
        const newP = document.createElement('p');
        newP.style.border = '1px solid black'
        newP.style.width = '430px'
        newP.style.textAlign = 'center'
        newP.style.paddingTop = '5px'
        newP.style.paddingBottom = '5px'
        newP.innerHTML = `Tocni: ${tocni} Na tocno mesto: ${naTocnoMesto}`
        for (let i = 0; i < 4; i++) {
            newDiv.innerHTML+="<input>"
        }
        document.querySelector("#vnesuvanja").appendChild(newP);
        document.querySelector("#vnesuvanja").appendChild(newDiv);
    }
</script>
</body>
</html>
